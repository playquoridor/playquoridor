{% extends "base_generic.html" %}
{% load static %}
{% load games_tags %}

{% block content %}
    <script src="{% static 'challenge/js/send_challenge.js' %}"></script>
    <script>
        // Prevents form resubmission dialog.
        // Ref: https://stackoverflow.com/questions/6320113/how-to-prevent-form-resubmission-when-page-is-refreshed-f5-ctrlr
        if ( window.history.replaceState ) {
            window.history.replaceState( null, null, window.location.href );
        }
    </script>

    <div class="hidden pointer" id="join-active-game">
        <!-- <button id="join-active-game"></button> -->
    </div>

    <main class="content">
        <div class="middle-container">
            {% include "include/leaderboard.html" %}
        </div>

        <div class="justify small-font gray-text"> <!-- small-padding -->
            <p> <b> Terms of Service.</b> <i> PlayQuoridor </i> is under continuous development. In this beta version, users may be affected by maintenance and technological disruptions (including glitches and data loss). If you do not agree, do not use our website or services. We are not liable for any losses or harm to you. By using our platform, you accept these conditions. Please <a href="mailto:playquoridor@gmail.com">contact us</a> to report any bugs, propose new features, or if you want to contribute to PlayQuoridor's development.</p>
        </div>
    </main>

<script>
    // Add game links
    const games = document.getElementsByClassName('displayed-game');
    for (const game of games){
        game.onclick = function (){
            /* Ref: https://stackoverflow.com/questions/11844430/back-button-fails-after-window-location-replacehref */
            window.location.href = window.location.protocol + "//" + window.location.host + "/game/" + game.id.split('-')[1];
        }
        game.classList.add('pointer');
    }
</script>
{% endblock %}

{% block leftblock %}
{% endblock %}

{% block rightblock %}
{% endblock %}


<!-- Active game -->
{% block activegame %}

{% endblock %}